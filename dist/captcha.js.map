{"version":3,"sources":["captcha.js"],"names":["getRndStr","nbChars","charPool","text","i","charAt","Math","random","length","rndColor","color","r","floor","g","b","charColor","ctx","str","x","y","ch","fillStyle","fillText","measureText","width","setupCanvas","charsColor","cnvsWidth","cnvsHeight","textFont","textPosX","textPosY","rndStr","canvas","document","createElement","getContext","height","font","module","exports"],"mappings":";AAKA,SAASA,IAEA,IAFUC,IAAAA,EAAU,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,EAAGC,EAAW,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,mCACnCC,EAAO,GACFC,EAAI,EAAGA,EAAIH,EAASG,IACzBD,GAAQD,EAASG,OAAQC,KAAKC,SAAWL,EAASM,OAAU,GAEzDL,OAAAA,EAQX,SAASM,EAASC,GACVC,IAAAA,EAAIL,KAAKM,MAAsB,IAAhBN,KAAKC,UACpBM,EAAIP,KAAKM,MAAsB,IAAhBN,KAAKC,UACpBO,EAAIR,KAAKM,MAAsB,IAAhBN,KAAKC,UACjBG,OAAAA,GAAgBC,OAAAA,OAAAA,EAAKE,KAAAA,OAAAA,EAAKC,KAAAA,OAAAA,EAAjC,KAGJ,SAASC,EAAUC,EAAKC,EAAKP,EAAOQ,EAAGC,GAC9B,IAAA,IAAIf,EAAI,EAAGA,EAAIa,EAAIT,OAAQJ,IAAK,CAC7BgB,IAAAA,EAAKH,EAAIZ,OAAOD,GACpBY,EAAIK,UAAYZ,EAASC,GACzBM,EAAIM,SAASF,EAAIF,EAAGC,GACpBD,GAAKF,EAAIO,YAAYH,GAAII,OASjC,SAASC,IAQL,IAAA,EAAA,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,GAPAxB,EAAAA,EAAAA,QACAC,EAAAA,EAAAA,SACAwB,EAAAA,EAAAA,WAAAA,OAAa,IAAA,EAAA,GAKT,EAJJC,EAAAA,EAAAA,UAAAA,OAAY,IAAA,EAAA,IAIR,EAJaC,EAAAA,EAAAA,WAAAA,OAAa,IAAA,EAAA,GAI1B,EAHJC,EAAAA,EAAAA,SAAAA,OAAW,IAAA,EAAA,aAGP,EAFJC,EAAAA,EAAAA,SAAAA,OAAW,IAAA,EAAA,GAEP,EADJC,EAAAA,EAAAA,SAAAA,OAAW,IAAA,EAAA,GACP,EAEAC,EAAShC,EAAUC,EAASC,GAE1B+B,EAASC,SAASC,cAAc,UAClCnB,EAAMiB,EAAOG,WAAW,MAQrB,OANPH,EAAOT,MAAQG,EACfM,EAAOI,OAAST,EAChBZ,EAAIsB,KAAOT,EAEXd,EAAUC,EAAKgB,EAAQN,EAAYI,EAAUC,GAEtC,CAAEE,OAAAA,EAAQD,OAAAA,GAIrBO,OAAOC,QAAUf","file":"captcha.js","sourceRoot":"..\\src","sourcesContent":["/**\r\n * \r\n * @param {object} config\r\n * @returns {string}\r\n */\r\nfunction getRndStr(nbChars = 5, charPool = \"ABCDEFGHIKLMNOPQRSTVXYZ123456789\") {\r\n    let text = \"\";\r\n    for (let i = 0; i < nbChars; i++) {\r\n        text += charPool.charAt((Math.random() * charPool.length) | 0);\r\n    }\r\n    return text;\r\n}\r\n\r\n/**\r\n * \r\n * @param {string} color\r\n * @returns {string}\r\n */\r\nfunction rndColor(color) {\r\n    let r = Math.floor(Math.random() * 256),\r\n        g = Math.floor(Math.random() * 256),\r\n        b = Math.floor(Math.random() * 256);\r\n    return color || `rgb(${r},${g},${b})`;\r\n}\r\n\r\nfunction charColor(ctx, str, color, x, y) {\r\n    for (let i = 0; i < str.length; i++) {\r\n        let ch = str.charAt(i);\r\n        ctx.fillStyle = rndColor(color);\r\n        ctx.fillText(ch, x, y);\r\n        x += ctx.measureText(ch).width;\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n * @param {Object} config \r\n * @return {Object}\r\n */\r\nfunction setupCanvas({\r\n    nbChars,\r\n    charPool,\r\n    charsColor = \"\",\r\n    cnvsWidth = 130, cnvsHeight = 30,\r\n    textFont = \"18px Arial\", \r\n    textPosX = 30, \r\n    textPosY = 30\r\n} = {}) {\r\n\r\n    let rndStr = getRndStr(nbChars, charPool);\r\n\r\n    const canvas = document.createElement('canvas'),\r\n        ctx = canvas.getContext('2d');\r\n\r\n    canvas.width = cnvsWidth;\r\n    canvas.height = cnvsHeight;\r\n    ctx.font = textFont;\r\n\r\n    charColor(ctx, rndStr, charsColor, textPosX, textPosY);\r\n\r\n    return { canvas, rndStr };\r\n}\r\n\r\n\r\nmodule.exports = setupCanvas;\r\n"]}